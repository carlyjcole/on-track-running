{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Popup, Polyline } from 'react-leaflet';\nimport './App.css';\nimport axios from 'axios';\nimport polyline from '@mapbox/polyline';\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const activities = [];\n  const clientID = \"your id\";\n  const clientSecret = \"your client secret\";\n  const refreshToken = \"your refresh token\";\n  const authLink = \"https://www.strava.com/oauth/token\";\n  const activitiesLink = `https://www.strava.com/api/v3/athlete/activities`;\n  async function fetchData() {\n    try {\n      // Fetch access token\n      const stravaAuthResponse = await axios.post(`${authLink}?client_id=${clientID}&client_secret=${clientSecret}&refresh_token=${refreshToken}&grant_type=refresh_token`);\n\n      // Fetch activities\n      const stravaActivityResponse = await axios.get(`${activitiesLink}?access_token=${stravaAuthResponse.data.access_token}`);\n\n      // Process activities and extract relevant data\n      const formattedActivities = stravaActivityResponse.data.map(activity => {\n        return {\n          activityPositions: polyline.decode(activity.map.summary_polyline),\n          activityName: activity.name,\n          activityElevation: activity.total_elevation_gain,\n          distance: activity.distance / 1609.34,\n          // Convert meters to miles\n          pace: calculatePace(activity.moving_time, activity.distance),\n          averageHeartRate: activity.average_heartrate,\n          averageSpeed: calculateSpeed(activity.moving_time, activity.distance)\n        };\n      });\n      setActivities(formattedActivities);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  }\n  function setActivities(data) {\n    activities.push(...data);\n    renderMap();\n  }\n\n  // Helper function to calculate pace in min/mi\n  function calculatePace(movingTime, distance) {\n    const paceInSeconds = movingTime / distance;\n    const paceInMinutes = Math.floor(paceInSeconds / 60);\n    const paceSeconds = Math.round(paceInSeconds % 60);\n    return `${paceInMinutes}:${paceSeconds < 10 ? '0' : ''}${paceSeconds} min/mi`;\n  }\n\n  // Helper function to calculate average speed in min/mi\n  function calculateSpeed(movingTime, distance) {\n    const speedInMph = distance / 1609.34 / (movingTime / 3600);\n    return speedInMph.toFixed(2) + ' min/mi';\n  }\n  function renderMap() {\n    // Code for rendering the map and activities\n    // Use the 'activities' array to display data on the map as needed\n  }\n  fetchData();\n});","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Popup","Polyline","axios","polyline","document","addEventListener","activities","clientID","clientSecret","refreshToken","authLink","activitiesLink","fetchData","stravaAuthResponse","post","stravaActivityResponse","get","data","access_token","formattedActivities","map","activity","activityPositions","decode","summary_polyline","activityName","name","activityElevation","total_elevation_gain","distance","pace","calculatePace","moving_time","averageHeartRate","average_heartrate","averageSpeed","calculateSpeed","setActivities","error","console","push","renderMap","movingTime","paceInSeconds","paceInMinutes","Math","floor","paceSeconds","round","speedInMph","toFixed"],"sources":["/Users/carlycole/personal-projects/on-track/on-track/src/components/Stats.js"],"sourcesContent":["\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Popup, Polyline } from 'react-leaflet'\nimport './App.css';\nimport axios from 'axios'\nimport polyline from '@mapbox/polyline'\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const activities = [];\n  const clientID = \"your id\";\n  const clientSecret = \"your client secret\";\n  const refreshToken = \"your refresh token\";\n  const authLink = \"https://www.strava.com/oauth/token\";\n  const activitiesLink = `https://www.strava.com/api/v3/athlete/activities`;\n\n  async function fetchData() {\n    try {\n      // Fetch access token\n      const stravaAuthResponse = await axios.post(`${authLink}?client_id=${clientID}&client_secret=${clientSecret}&refresh_token=${refreshToken}&grant_type=refresh_token`);\n\n      // Fetch activities\n      const stravaActivityResponse = await axios.get(`${activitiesLink}?access_token=${stravaAuthResponse.data.access_token}`);\n\n      // Process activities and extract relevant data\n      const formattedActivities = stravaActivityResponse.data.map(activity => {\n        return {\n          activityPositions: polyline.decode(activity.map.summary_polyline),\n          activityName: activity.name,\n          activityElevation: activity.total_elevation_gain,\n          distance: activity.distance / 1609.34, // Convert meters to miles\n          pace: calculatePace(activity.moving_time, activity.distance),\n          averageHeartRate: activity.average_heartrate,\n          averageSpeed: calculateSpeed(activity.moving_time, activity.distance),\n        };\n      });\n\n      setActivities(formattedActivities);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  }\n\n  function setActivities(data) {\n    activities.push(...data);\n    renderMap();\n  }\n\n  // Helper function to calculate pace in min/mi\n  function calculatePace(movingTime, distance) {\n    const paceInSeconds = movingTime / distance;\n    const paceInMinutes = Math.floor(paceInSeconds / 60);\n    const paceSeconds = Math.round(paceInSeconds % 60);\n    return `${paceInMinutes}:${paceSeconds < 10 ? '0' : ''}${paceSeconds} min/mi`;\n  }\n\n  // Helper function to calculate average speed in min/mi\n  function calculateSpeed(movingTime, distance) {\n    const speedInMph = (distance / 1609.34) / (movingTime / 3600);\n    return speedInMph.toFixed(2) + ' min/mi';\n  }\n\n  function renderMap() {\n    // Code for rendering the map and activities\n    // Use the 'activities' array to display data on the map as needed\n  }\n\n  fetchData();\n});\n"],"mappings":"AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,YAAY,EAAEC,SAAS,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,eAAe;AACxE,OAAO,WAAW;AAClB,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,kBAAkB;AAEvCC,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAY;EACxD,MAAMC,UAAU,GAAG,EAAE;EACrB,MAAMC,QAAQ,GAAG,SAAS;EAC1B,MAAMC,YAAY,GAAG,oBAAoB;EACzC,MAAMC,YAAY,GAAG,oBAAoB;EACzC,MAAMC,QAAQ,GAAG,oCAAoC;EACrD,MAAMC,cAAc,GAAI,kDAAiD;EAEzE,eAAeC,SAASA,CAAA,EAAG;IACzB,IAAI;MACF;MACA,MAAMC,kBAAkB,GAAG,MAAMX,KAAK,CAACY,IAAI,CAAE,GAAEJ,QAAS,cAAaH,QAAS,kBAAiBC,YAAa,kBAAiBC,YAAa,2BAA0B,CAAC;;MAErK;MACA,MAAMM,sBAAsB,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAE,GAAEL,cAAe,iBAAgBE,kBAAkB,CAACI,IAAI,CAACC,YAAa,EAAC,CAAC;;MAExH;MACA,MAAMC,mBAAmB,GAAGJ,sBAAsB,CAACE,IAAI,CAACG,GAAG,CAACC,QAAQ,IAAI;QACtE,OAAO;UACLC,iBAAiB,EAAEnB,QAAQ,CAACoB,MAAM,CAACF,QAAQ,CAACD,GAAG,CAACI,gBAAgB,CAAC;UACjEC,YAAY,EAAEJ,QAAQ,CAACK,IAAI;UAC3BC,iBAAiB,EAAEN,QAAQ,CAACO,oBAAoB;UAChDC,QAAQ,EAAER,QAAQ,CAACQ,QAAQ,GAAG,OAAO;UAAE;UACvCC,IAAI,EAAEC,aAAa,CAACV,QAAQ,CAACW,WAAW,EAAEX,QAAQ,CAACQ,QAAQ,CAAC;UAC5DI,gBAAgB,EAAEZ,QAAQ,CAACa,iBAAiB;UAC5CC,YAAY,EAAEC,cAAc,CAACf,QAAQ,CAACW,WAAW,EAAEX,QAAQ,CAACQ,QAAQ;QACtE,CAAC;MACH,CAAC,CAAC;MAEFQ,aAAa,CAAClB,mBAAmB,CAAC;IACpC,CAAC,CAAC,OAAOmB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C;EACF;EAEA,SAASD,aAAaA,CAACpB,IAAI,EAAE;IAC3BX,UAAU,CAACkC,IAAI,CAAC,GAAGvB,IAAI,CAAC;IACxBwB,SAAS,CAAC,CAAC;EACb;;EAEA;EACA,SAASV,aAAaA,CAACW,UAAU,EAAEb,QAAQ,EAAE;IAC3C,MAAMc,aAAa,GAAGD,UAAU,GAAGb,QAAQ;IAC3C,MAAMe,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACH,aAAa,GAAG,EAAE,CAAC;IACpD,MAAMI,WAAW,GAAGF,IAAI,CAACG,KAAK,CAACL,aAAa,GAAG,EAAE,CAAC;IAClD,OAAQ,GAAEC,aAAc,IAAGG,WAAW,GAAG,EAAE,GAAG,GAAG,GAAG,EAAG,GAAEA,WAAY,SAAQ;EAC/E;;EAEA;EACA,SAASX,cAAcA,CAACM,UAAU,EAAEb,QAAQ,EAAE;IAC5C,MAAMoB,UAAU,GAAIpB,QAAQ,GAAG,OAAO,IAAKa,UAAU,GAAG,IAAI,CAAC;IAC7D,OAAOO,UAAU,CAACC,OAAO,CAAC,CAAC,CAAC,GAAG,SAAS;EAC1C;EAEA,SAAST,SAASA,CAAA,EAAG;IACnB;IACA;EAAA;EAGF7B,SAAS,CAAC,CAAC;AACb,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}